"use strict";var THREE=_interopRequireWildcard(require("https://cdn.skypack.dev/three@0.128.0/build/three.module.js")),_OrbitControls=require("https://cdn.skypack.dev/three@0.128.0/examples/jsm/controls/OrbitControls.js"),_GLTFLoader=require("https://cdn.skypack.dev/three@0.128.0/examples/jsm/loaders/GLTFLoader.js"),_SkeletonUtils=require("https://cdn.skypack.dev/three@0.129.0/examples/jsm/utils/SkeletonUtils.js");function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(e,t,n){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function main(){var e=document.getElementById("main-canvas"),r=new THREE.WebGLRenderer({canvas:e}),o=new THREE.Scene;o.background=new THREE.Color("#aaaaaa");var t=document.getElementsByClassName("loader")[0],n=new THREE.AmbientLight(11184810);o.add(n);var i=new THREE.DirectionalLight(16777215);i.position.set(0,200,100),o.add(i);var a=window.innerWidth/window.innerHeight,c=new THREE.PerspectiveCamera(90,a,.1,4e4);c.position.set(0,1.5,20),new _OrbitControls.OrbitControls(c,e).update();var s={time:0,deltaTime:0},u=new THREE.LoadingManager;u.onLoad=function(){t.style.display="none",function(){for(var e=function(){var n=r[t];n.animationClip={},n.gltf.animations.forEach(function(e,t){n.animationClip[e.name]=n.gltf.animations[t]})},t=0,r=Object.values(l);t<r.length;t++)e()}(),g.createGameObject(o,"player").addComp(_),j()};for(var l={boy:{url:"https://threejsfundamentals.org/threejs/resources/models/knight/KnightCharacter.gltf"}},f=new _GLTFLoader.GLTFLoader(u),p=function(){var t=h[d];f.load(t.url,function(e){t.gltf=e})},d=0,h=Object.values(l);d<h.length;d++)p();function m(e){_classCallCheck(this,m),this.gameObject=e}var y=function(){function e(){_classCallCheck(this,e),this.gameObjects=[],this.removeQueque={},this.addQueque=[]}return _createClass(e,[{key:"createGameObject",value:function(e,t){return this.gameObject=new b(e,t),this.gameObjects.push(this.gameObject),this.gameObject}},{key:"removeGameObject",value:function(e){this.removeQueque.add(e)}},{key:"updateQueue",value:function(){var e;0<this.removeQueque.length&&(this.removeQueque=[]),0<this.addQueque.length&&((e=this.gameObjects).push.apply(e,_toConsumableArray(this.addQueque)),this.addQueque=[])}},{key:"update",value:function(){this.updateQueue(),this.gameObjects.forEach(function(e){e.update()})}}]),e}(),b=(new y,function(){function n(e,t){_classCallCheck(this,n),this.name=t,this.components=new Array,this.objectRoot=new THREE.Object3D,e.add(this.objectRoot)}return _createClass(n,[{key:"addComp",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=_construct(e,[this].concat(n));return this.components.push(o),o}},{key:"getComponent",value:function(){}},{key:"removeComponent",value:function(){}},{key:"update",value:function(){this.components.forEach(function(e){e.update()})}}]),n}()),v=function(){function r(e,t){var n;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,e))).model=t,n.clonedScene=_SkeletonUtils.SkeletonUtils.clone(n.model.gltf.scene),e.objectRoot.add(n.clonedScene),n.mixer=new THREE.AnimationMixer(n.clonedScene),n.actions={},n}return _inherits(r,m),_createClass(r,[{key:"setActiveAnimation",value:function(e){var t=this.model.animationClip[e];if(t){Object.values(this.actions).forEach(function(e){e.enabled=!1});var n=this.mixer.clipAction(t);(this.actions[e]=n).enabled=!0,n.reset(),n.play()}else console.warn("desired animation clip is not found in animations list")}}]),r}(),_=function(){function r(e,t){var n;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,e))).modelData=l.boy,n.modelSkinedInstance=new v(e,n.modelData),n.modelSkinedInstance.setActiveAnimation("Run"),n}return _inherits(r,m),_createClass(r,[{key:"update",value:function(){this.modelSkinedInstance.mixer.update(s.deltaTime)}}]),r}(),g=new y;var O=new THREE.Clock;function j(e){var t=O.getDelta();if(s.deltaTime=t,function(e){var t=e.domElement,n=t.clientWidth,r=t.clientHeight,o=t.width!==n||t.height!==r;return o&&e.setSize(n,r,!1),o}(r)){var n=r.domElement;c.aspect=n.clientWidth/n.clientHeight,c.updateProjectionMatrix()}g.update(),r.render(o,c),requestAnimationFrame(j)}}main();
//# sourceMappingURL=client2.min.js.map
